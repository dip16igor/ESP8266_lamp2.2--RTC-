# ESP8266 –£–º–Ω–∞—è –õ–∞–º–ø–∞ —Å RTC

[English version (–ê–Ω–≥–ª–∏–π—Å–∫–∞—è –≤–µ—Ä—Å–∏—è)](README.md)

–£–º–Ω–∞—è –ª–∞–º–ø–∞ –Ω–∞ –±–∞–∑–µ ESP8266 —Å —Ñ—É–Ω–∫—Ü–∏–µ–π —á–∞—Å–æ–≤ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏, –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è, –ø–ª–∞–≤–Ω–æ–π —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–æ–π —è—Ä–∫–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å Telegram-–±–æ—Ç–æ–º.

## ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
  - –≠–Ω–∫–æ–¥–µ—Ä –¥–ª—è –ø–ª–∞–≤–Ω–æ–π —Ä–µ–≥—É–ª–∏—Ä–æ–≤–∫–∏ —è—Ä–∫–æ—Å—Ç–∏
  - –ö–Ω–æ–ø–∫–∞ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –≤–∫–ª—é—á–µ–Ω–∏—è/–≤—ã–∫–ª—é—á–µ–Ω–∏—è –∏ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ä–µ–∂–∏–º–æ–≤
  - –ì–∞–º–º–∞-–∫–æ—Ä—Ä–µ–∫—Ü–∏—è –¥–ª—è –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è —è—Ä–∫–æ—Å—Ç–∏
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Ä–∞–±–æ—Ç–∞:**
  - –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –æ—Å–Ω–æ–≤–µ RTC
  - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ —Å–≤–µ—Ç–∞ (–∏–º–∏—Ç–∞—Ü–∏—è —Ä–∞—Å—Å–≤–µ—Ç–∞)
  - –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –¥–ª—è —Ä–∞–∑–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏ —Å—É—Ç–æ–∫
- **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Telegram:**
  - –£–¥–∞–ª–µ–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ Telegram-–±–æ—Ç–∞
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏
  - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—à–∏–≤–∫–∏ "–ø–æ –≤–æ–∑–¥—É—Ö—É" (OTA)
- **–í–∏–∑—É–∞–ª—å–Ω–∞—è –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å:**
  - –î–≤–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞ NeoPixel –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
  - –†–∞–∑–Ω—ã–µ —Ü–≤–µ—Ç–∞ –æ–±–æ–∑–Ω–∞—á–∞—é—Ç —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Ä–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∏—Ç–∞–Ω–∏–µ–º:**
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DC-DC –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª–µ–º –¥–ª—è —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–π —Ä–∞–±–æ—Ç—ã
  - –ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –º–æ—â–Ω–æ—Å—Ç–∏

## üîå –ê–ø–ø–∞—Ä–∞—Ç–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **ESP8266** –º–∏–∫—Ä–æ–∫–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä (–Ω–∞–ø—Ä–∏–º–µ—Ä, NodeMCU v2)
- **–≠–Ω–∫–æ–¥–µ—Ä** —Å –∫–Ω–æ–ø–∫–æ–π –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —è—Ä–∫–æ—Å—Ç—å—é
- **NeoPixel (WS2812B)** —Å–≤–µ—Ç–æ–¥–∏–æ–¥–Ω–∞—è –ª–µ–Ω—Ç–∞ (2 —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞) –¥–ª—è –∏–Ω–¥–∏–∫–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è
- **DC-DC –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–∏—Ç–∞–Ω–∏–µ–º —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤
- **–®–ò–ú –≤—ã—Ö–æ–¥** –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —è—Ä–∫–æ—Å—Ç—å—é

## üìö –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

- `EncButton` - –î–ª—è —Ä–∞–±–æ—Ç—ã —Å —ç–Ω–∫–æ–¥–µ—Ä–æ–º
- `Adafruit_NeoPixel` - –î–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–≤–µ—Ç–æ–¥–∏–æ–¥–∞–º–∏
- `FastBot` - –î–ª—è —Ä–∞–±–æ—Ç—ã —Å Telegram-–±–æ—Ç–æ–º
- `TimeLib` –∏ `TimeAlarms` - –î–ª—è —Ä–∞–±–æ—Ç—ã —Å RTC
- `NTPClient` - –î–ª—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –≤—Ä–µ–º–µ–Ω–∏

## üõ†Ô∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `src/secrets.h` —Å –≤–∞—à–µ–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–µ–π:
```cpp
#pragma once

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ WiFi
#define WIFI_SSID "–í–ê–®_WIFI_SSID"
#define WIFI_PASSWORD "–í–ê–®_–ü–ê–†–û–õ–¨_WIFI"

// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ Telegram-–±–æ—Ç–∞
#define BOT_TOKEN "–í–ê–®_–¢–û–ö–ï–ù_–ë–û–¢–ê"
#define ADMIN_ID "–í–ê–®_CHAT_ID"
```

2. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —á–∞—Å–æ–≤—ã–µ –ø–æ—è—Å–∞ –∏ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –≤ `main.cpp`:
```cpp
#define OffsetTime 5 * 60 * 60 // –°–º–µ—â–µ–Ω–∏–µ UTC –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
```

## ‚ö° –†–µ–∂–∏–º—ã —Ä–∞–±–æ—Ç—ã

- **–†—É—á–Ω–æ–π —Ä–µ–∂–∏–º (`STATE_ON_MANUAL`):**
  - –ü—Ä—è–º–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç—å—é —á–µ—Ä–µ–∑ —ç–Ω–∫–æ–¥–µ—Ä
  - –ü–æ–ª–Ω—ã–π –¥–∏–∞–ø–∞–∑–æ–Ω –æ—Ç 0 –¥–æ 100%

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ (`STATE_ON_AUTO`):**
  - –ë—ã—Å—Ç—Ä–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏
  - –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –Ω–∞ –ø—Ä–µ–¥—É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º —É—Ä–æ–≤–Ω–µ

- **–ú–µ–¥–ª–µ–Ω–Ω–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ (`STATE_ON_AUTO_SLOW`):**
  - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏ (–∏–º–∏—Ç–∞—Ü–∏—è —Ä–∞—Å—Å–≤–µ—Ç–∞)
  - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è —É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã–∫–ª—é—á–µ–Ω–∏–µ (`STATE_OFF_AUTO`):**
  - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ–µ —É–º–µ–Ω—å—à–µ–Ω–∏–µ —è—Ä–∫–æ—Å—Ç–∏ –¥–æ –≤—ã–∫–ª—é—á–µ–Ω–∏—è
  - –ú–æ–∂–µ—Ç –±—ã—Ç—å –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–æ –ø–æ —Ç–∞–π–º–µ—Ä—É –∏–ª–∏ –∫–æ–º–∞–Ω–¥–µ

## ü§ñ –ö–æ–º–∞–Ω–¥—ã Telegram

- `/start` - –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã
- `/ping` - –ü–æ–ª—É—á–∏—Ç—å —Ç–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å (–≤—Ä–µ–º—è —Ä–∞–±–æ—Ç—ã, —É—Ä–æ–≤–µ–Ω—å —Å–∏–≥–Ω–∞–ª–∞ WiFi)
- `/restart` - –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ

## üì± –ò–Ω–¥–∏–∫–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

–¶–≤–µ—Ç–∞ —Å–≤–µ—Ç–æ–¥–∏–æ–¥–æ–≤ –æ–±–æ–∑–Ω–∞—á–∞—é—Ç —Ä–∞–∑–Ω—ã–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è:
- –ö—Ä–∞—Å–Ω—ã–π - –í—ã–∫–ª—é—á–µ–Ω–æ –∏–ª–∏ –æ—à–∏–±–∫–∞
- –ó–µ–ª–µ–Ω—ã–π - –†—É—á–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- –°–∏–Ω–∏–π - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ/–Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- –§–∏–æ–ª–µ—Ç–æ–≤—ã–π - –ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞
- –ì–æ–ª—É–±–æ–π - –ê–∫—Ç–∏–≤–µ–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∂–∏–º
